#:kivy 1.4.1

<Default_Particle_Panel>:
    Label:
        center: root.center
        text: 'Add a Particle to Begin Editing'
    
<ParticlePanel>:
    canvas:
        Color:
            rgb:(0, 1, 0)
        Rectangle:
            pos: self.pos
            size: self.size

<BehaviorPanel>:
    canvas:
        Color:
            rgb:(1, 0, 0)
        Rectangle:
            pos: self.pos
            size: self.size

<ColorPanel>:
    canvas:
        Color:
            rgb:(0, 0, 1)
        Rectangle:
            pos: self.pos
            size: self.size

<ParticleParamsLayout>:
    particle_tabs: particle_tabs
    BoxLayout:
        pos: root.pos
        size: root.size
        TabbedPanel:
            id: particle_tabs
            pos: root.pos
            size: root.size
            default_tab_content: root.get_default_tab()
            default_tab_text: 'Hello'

[VariantButton@ToggleButton]
    size_hint: (1., .1)
    text: ctx.text
    group: ctx.group
    num_tab: ctx.num_tab
    pbuilder: ctx.pbuilder
    pos: self.pos
    on_state: self.pbuilder.params_layout.add_tab_to_layout(ctx.num_tab) if root.state == 'down' else self.pbuilder.params_layout.remove_tab_from_layout(ctx.num_tab)
    canvas: 
        Color:
            rgba: (1, .5, 1, .5)
        Rectangle:
            pos: self.pos
            size: self.size

<ParticleVariationLayout>:
    canvas:
        Color:
            rgb:(1, 1, 1)
        Rectangle:
            pos: self.pos
            size: self.size
    variation_layout: variationlayout
    on_size:
        print self.size
    BoxLayout:
        size_hint: (1., 1.)
        pos: root.pos
        size: root.size
        orientation: 'vertical'
        StackLayout:
            id: variationlayout
            size_hint: (1., .9)
        Button:
            size_hint: (1., .1)
            text: 'Add Variant'
            on_state: root.add_variant_button() if (self.state == 'down') else None   
            
<ParticleBuilder>:
    params_layout: params_layout
    variation_layout: variation_layout
    FloatLayout: 
        canvas:
            Color:
                rgb: (.5, .5, .5)
            Rectangle:
                pos: root.pos
                size: root.size
        size_hint: (1., 1.)
        ParticleVariationLayout:
            id: variation_layout
            pos: root.pos[0] + root.width*.02, root.pos[1] + root.height*.032
            size: (root.size[0]/3 - root.size[0]*.04, root.size[1]/2 - root.size[1]*.064)
        ParticleParamsLayout:
            id: params_layout
            pos: root.pos[0] + root.width*.02 + root.width/2, root.pos[1] + root.height*.032
            size: (root.size[0]/2. - root.size[0]*.04, root.size[1] - root.size[1]*.064)
        
ParticleBuilder:
    size_hint: (1., 1.) 



    






            



                            








